{{extend 'layout.html'}}

<style>
    body { 
 background-image:url('/assgn_ans/static/images/b3.jpg');
 height:100%;
 width:100%;
}
    .three{
        margin-top:-20px;
        margin-left:200px;
        
        
    }
    .four{
        font-size:30px;
        
        
    }
    
    table{
        width:100%;
    }
    img {
        height:250px;
        width:250px;
        text-align:left;
        float:left;
    }
    .d1{
        font-size:30px;
        color:green;
        text-align:center;
    }
    .d2{
        font-size:25px;
        color:black;
        text-align:center;
        
    }
    .c3{
        height:250px;
        width:250px;
        
    }
    .hd{
        color:#9966CC;
    }
    .hd1{
        font-size:20px;
    }
</style>
<body>
    

<table>

<tr>
    <td rowspan='3' class="c3">
        <img width="400px" src="{{=URL('download', args=image.file)}}" />
    </td>
    <td class="d1">
        Dish's Name:
    </td>
    <td class="d2">
        {{=image.title}}
    </td>
</tr>
<tr>
    <td class="d1">
        Author:
    </td>
    <td class="d2">
        {{=image.author}}
    </td>
</tr>
<tr>
    <td class="d1">
        uploaded on:
    </td>
    <td class="d2">
        {{=image.created_on}}
    </td>
</tr>
</table>
<h2 class="hd">
    Process:
</h2>
<div class="hd1"> 
    
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    {{=image.body}}
   
        
    
</div>
<hr><hr>
<center><table  class="three">
    <tr data-id="{{=image.id}}">
            <td><img src="/assgn_ans/static/images/l1.png" style="width:60px;height:60px;"/ data-direction="up">
        </td><td class="four"><br><span class="votes">&nbsp;{{=image.votes}}</span></td><td><img src="/assgn_ans/static/images/l2.png" style="width:60px;height:60px;"/ data-direction="down">
            </td></tr>
</table></center>

<script>
    function do_ajax_vote(t,direction){
        var id = jQuery(t).closest('tr').attr('data-id');
        jQuery.ajax({method:'post',url:'{{=URL('vote_callback')}}',
                     data:{'id':id,'direction':direction},
                    success:function(data){
            jQuery(t).closest('tr').find('.votes').html(data);
        }});
          }
    jQuery(function(){
        jQuery('[data-direction=up').click(function(){do_ajax_vote(this,'up');});
        jQuery('[data-direction=down').click(function(){do_ajax_vote(this,'down');});
    });
</script>
</body>
